name: Build & Test ROS/ROS2
on: push

jobs:
  Build_Test_ROS2:
    runs-on: ubuntu-latest
    container:
      image: ubuntu:focal
    defaults:
      run:
        working-directory: ./ros2_ws
    steps:
      - name: Setup ROS 2
        uses: ros-tooling/setup-ros@v0.2
        with:
          required-ros-distributions: foxy
      - name: Build ROS2
        uses: ros-tooling/action-ros-ci@v0.2
        with:
          package-name: ros_tutorials, roscpp_tutorials, rospy_tutorials, turtlesim
          target-ros2-distro: foxy
          skip-tests: true
  Build_Test_ROS1:
    runs-on: ubuntu-latest
    container:
      image: ubuntu:focal
    defaults:
      run:
        working-directory: ./catkin_ws
    steps:
      - name: Setup ROS 2
        uses: ros-tooling/setup-ros@v0.2
        with:
          required-ros-distributions: noetic
      - name: Build ROS2
        uses: ros-tooling/action-ros-ci@v0.2
        with:
          package-name: ros_tutorials, roscpp_tutorials, rospy_tutorials, turtlesim
          target-ros1-distro: noetic
          skip-tests: true